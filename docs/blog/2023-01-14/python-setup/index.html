<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta
			name="viewport"
			content="width=device-width, initial-scale=1, maximum-scale=1" />

		<title>My Python setup, as of January 2023</title>

		 
		<meta property="og:title" content="My Python setup, as of January 2023" />
		
		<meta property="og:type" content="website" />
		
		<meta property="og:author" content="Chris Amico" />
		
		<meta property="og:url" content="https://chrisamico.com" />
		
		<meta property="og:description" content="Journalist &amp; programmer" />
		  
		<link
			rel="stylesheet"
			href="../../../static/normalize.css?t=1688344267.6765983" />
		<link
			rel="stylesheet"
			href="../../../static/site.css?t=1688344267.6765983" />

		<link rel="alternate" href="../../../blog.rss" />
		<link rel="alternate" href="../../../links.rss" />
		    
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script
			async
			src="https://www.googletagmanager.com/gtag/js?id=UA-1576645-1"></script>
		<script>
			window.dataLayer = window.dataLayer || [];
			function gtag() {
				dataLayer.push(arguments);
			}
			gtag("js", new Date());
			gtag("config", "UA-1576645-1");
		</script>
		
	</head>
	<body>
		<div class="container">
			
			<header id="about" class="left">
				<div class="fixed">
					<h1>Chris Amico</h1>
					<h2 class="tagline quiet">Journalist &amp; programmer</h2>

					<ul class="social">
						<li class="github">
							<a href="https://github.com/eyeseast" class="icon-github">Github</a>
						</li>
						<li class="linkedin">
							<a href="https://www.linkedin.com/in/chrisamico/" class="icon-linkedin">LinkedIn</a>
						</li>
						<li class="mastodon">
							<a class="icon-mastodon" rel="me" href="https://journa.host/@chrisamico"
								>Mastodon</a
							>
						</li>
						<li class="blog">
							<a href="/blog/">Blog archive</a>
						</li>
						<li class="portfolio">
							<a href="/portfolio/">Portfolio</a>
						</li>
						<li class="github">
							<a class="icon-github" href="https://github.com/eyeseast/chrisamico.com"
								>View source</a
							>
						</li>
					</ul>
				</div>
			</header>

			 
<article id="post" class="right">
	<h1>My Python setup, as of January 2023</h1>

	<div class="metadata">
		<p><time>Jan 14, 2023</time></p>
	</div>
	<div class="content"><p>This is my recommended Python setup, as of January 2023. The Python landscape can be a <a href="https://xkcd.com/1987/">confusing mess of overlapping tools</a> that sometimes don&rsquo;t work well together. I wrote this for my team at work, which included (at the time) a designer and several developers used to working in Node.js and Go. This was an effort to standardize our environments.</p>
<h2>Tools and helpful links:</h2>
<ul>
<li>Python docs: <a href="https://docs.python.org/3/">https://docs.python.org/3/</a></li>
<li>Python Standard Library: <a href="https://docs.python.org/3/library/index.html">https://docs.python.org/3/library/index.html</a> - Start here when you&rsquo;re trying to solve a specific problem</li>
<li>pip: <a href="https://pip.pypa.io/en/stable/">https://pip.pypa.io/en/stable/</a> - Python&rsquo;s standard package installer, included with the language itself</li>
<li>pipx: <a href="https://pipxproject.github.io/pipx/">https://pipxproject.github.io/pipx/</a> - Global script installer, built on top of pip</li>
<li>pipenv: <a href="https://pipenv.pypa.io/en/latest/">https://pipenv.pypa.io/en/latest/</a> - Package installer for projects, manages both dependencies and virtual environments</li>
<li>pyenv: <a href="https://github.com/pyenv/pyenv">https://github.com/pyenv/pyenv</a> - Manage different versions of Python itself</li>
<li>homebrew: <a href="https://brew.sh/">https://brew.sh/</a> - Package manager for macOs, use for specific needs</li>
<li>Postgres.app: <a href="https://postgresapp.com/">https://postgresapp.com/</a> - Preferred database server for macOs</li>
</ul>
<h2>Installing the right Python</h2>
<p>Python 3 is now the right version of Python to use. We may have projects running different minor versions – such as 3.7 or 3.9 – but we should always default to the latest available version. As of this writing, that&rsquo;s 3.11.1. The most up-to-date Python documentation will always be here: https://docs.python.org/3/.</p>
<p>In the past, you might have seen recommendations to install Python with homebrew. This is now strongly discouraged. Let me say that louder: <strong>DO NOT INSTALL PYTHON WITH HOMEBREW</strong>. Homebrew can be very aggressive and expansive with upgrades, and upgrading one package often results in lots of seemingly unrelated upgrades, which will frequently break dependencies for other packages.</p>
<p><strong>Use pyenv</strong>. To install and manage different Python versions, use pyenv. In most cases, I recommend either the homebrew installation or the git installation:</p>
<div class="codehilite"><pre><span></span><code>brew<span class="w"> </span>update
brew<span class="w"> </span>install<span class="w"> </span>pyenv
</code></pre></div>

<p>Is it weird that I recommend using homebrew to install pyenv but not Python? Yes it is. But pyenv is built entirely with shell scripts, so it&rsquo;s relatively safe, and pyenv itself will keep your Python versions safely isolated from homebrew&rsquo;s aggressive upgrades.</p>
<p>Follow the instructions to configure your shell profile (https://github.com/pyenv/pyenv#installation) so that the pyenv command is available and you are able to install new versions of Python as needed.</p>
<p>From there, install at least the latest stable version of Python (again, probably 3.11.1) and make that your global default. This will make the right version of pip available for installing new packages.</p>
<div class="codehilite"><pre><span></span><code>pyenv<span class="w"> </span>install<span class="w"> </span>--list<span class="w"> </span><span class="c1"># see a list of installable versions</span>
pyenv<span class="w"> </span>install<span class="w"> </span><span class="m">3</span>.11.1<span class="w"> </span><span class="c1"># or something different</span>
pyenv<span class="w"> </span>global<span class="w"> </span><span class="m">3</span>.11.1

python<span class="w"> </span>--version
<span class="c1"># Python 3.11.1</span>

which<span class="w"> </span>python
<span class="c1"># /Users/camico/.pyenv/shims/python</span>

which<span class="w"> </span>pip
<span class="c1"># /Users/camico/.pyenv/shims/pip</span>
</code></pre></div>

<h2>Global scripts and utilities</h2>
<p>For any tools built in Python you want available across projects, use <code>pipx</code>. Install it with <code>pip</code>:</p>
<div class="codehilite"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>--user<span class="w"> </span>pipx<span class="w"> </span><span class="c1"># install it</span>
pipx<span class="w"> </span>ensurepath<span class="w"> </span><span class="c1"># make sure your system can find it</span>
</code></pre></div>

<p><em>(Note that pipx&rsquo;s documentation recommends installing with Homebrew. As noted above, I don&rsquo;t recommend using Homebrew with Python projects, except for pyenv.)</em></p>
<p>Among the first things you should install with <code>pipx</code> is <code>pipenv</code>, which we&rsquo;ll use for specific projects.</p>
<h2>Virtual environments</h2>
<p>Python uses virtual environments to separate dependencies for different projects. This can be a frustrating step, especially if you are used to having a local <code>node_modules</code> folder. In the past, this also meant having to install a separate <code>virtualenv</code> library. In Python 3, it&rsquo;s now part of the standard library as the <code>venv</code> package.</p>
<p>This is a good tutorial that covers how virtual environments work: https://docs.python.org/3/tutorial/venv.html</p>
<p>Here&rsquo;s the tl;dr:</p>
<div class="codehilite"><pre><span></span><code>python<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>project-dir

<span class="nb">source</span><span class="w"> </span>project-dir/bin/activate
</code></pre></div>

<p>That will create a virtual environment in the <code>project-dir</code> folder. The second command will run the activate script, which will tell your shell to use a local version of Python and locally installed dependencies. For the most part, you won&rsquo;t have to do this by hand, but it&rsquo;s useful to know what&rsquo;s happening under the hood.</p>
<p>In a project with a <code>Pipfile</code>, like <a href="https://github.com/eyeseast/alltheplaces-datasette">alltheplaces-datasette</a>, we can use <code>pipenv</code> to both manage our virtual environment and install dependencies. In that case, navigate to the directory and run <code>pipenv sync</code>:</p>
<div class="codehilite"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>alltheplaces-datasette
pipenv<span class="w"> </span>sync
</code></pre></div>

<p>This will also, assuming you have pyenv installed and working, switch to the version of Python listed in the <code>Pipfile</code> (installing it if needed). Consult the <a href="https://pipenv.pypa.io/en/latest/">pipenv docs</a> to see what else it can do.</p>
<p>In practice, I almost never use a virtual environment by itself. My standalone projects, like <a href="https://github.com/eyeseast/alltheplaces-datasette">alltheplaces-datasette</a>, will always include a <code>Pipfile</code> and <code>Pipfile.lock</code>.</p>
<p>When I work on open source libraries (mine or not), I still use <code>pipenv</code>. Running <code>pipenv install -e .</code> will create a virtual environment with that library and its dependencies.</p>
<p>If I need to run Python commands inside a virtual environment, I use <code>pipenv shell</code> or <code>pipenv run</code>.</p>
<h2>Installing local Python packages</h2>
<p>For the most part, we&rsquo;re going to work on projects where we have a <code>Pipfile</code> managing dependencies. In that case, installing something new is a one-liner:</p>
<div class="codehilite"><pre><span></span><code>pipenv<span class="w"> </span>install<span class="w"> </span>django
</code></pre></div>

<p>That will install the <code>django</code> package, add it to our <code>Pipfile</code> and update our <code>Pipfile.lock</code> file, pinning a specific version. Running <code>pipenv sync</code>, as above, installs dependencies from <code>Pipfile.lock</code>, much like <code>npm ci</code> installs from <code>package-lock.json</code>, ensuring we get the same version of every dependency every time.</p>
<h2>Databases</h2>
<p>There are two main databases I use with Python: <a href="https://sqlite.org/">SQLite</a> and <a href="https://www.postgresql.org/">Postgres</a>.</p>
<p>SQLite comes bundled with Python, though I use a more recent version installed via Homebrew. (That&rsquo;s worth a post in itself.) It runs as an embedded process, with all data contained in a single file, and it can be very useful for data analysis.</p>
<p>Postgres is the best database available for web applications. For local development, I recommend <code>Postgres.app</code>, which the easiest way to manage a database server on your laptop.</p>
<p><em>So that&rsquo;s it. It&rsquo;s a lot. Why is Python so complicated to set up right? I&rsquo;ll get into that in a future post.</em></p></div>

	<div class="end">
		<a href="../../index.html">Blog</a> |
		<a href="../../../portfolio/index.html">Portfolio</a> |
		<a href="../../../index.html">Home</a>
	</div>
</article>

		</div>

		
	</body>
</html>